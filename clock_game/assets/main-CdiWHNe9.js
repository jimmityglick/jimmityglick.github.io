import{r as i,u as se,a as ae,b as ne,c as E,p as re,j as e,m as u,P as R,S as j,C as ie,B as L,d as p,e as le,f as oe,R as ce}from"./styles-DpeE_taN.js";const de=a=>{const d=i.useRef(null),[l,g]=i.useState(a);return i.useEffect(()=>{if(d.current===null){d.current=a,g(a);return}const n=d.current,h=(n%360+360)%360,o=(a-h+540)%360-180,m=n+o;d.current=m,g(m)},[a]),l},{viewBox:xe,faceRadius:b,tickOuter:O,tickInner:H,labelRadius:G,handLength:W,storageKey:he}=ie,_=a=>le(a,12),N=a=>a===0?12:a,me=(a,d,l)=>{const g=[l[0],-l[0],l[1],-l[1]].map(_),n=Array(12).fill(1/0),h=[];for(n[a]=0,h.push(a);h.length;){const o=h.shift();if(o===void 0)break;if(o===d)return n[o];for(const m of g){const y=_(o+m);n[y]===1/0&&(n[y]=n[o]+1,h.push(y))}}return 1/0},ue=()=>{const[a,d]=i.useState(0),[l,g]=i.useState(0),[n,h]=i.useState([1,3]),[o,m]=i.useState(0),[y,K]=i.useState(null),[v,V]=i.useState(!0),[c,T]=i.useState(!1),[x,M]=i.useState([]),{best:B,updateBestIfBetter:D,resetBest:U}=se(he),P=i.useMemo(()=>Array.from({length:12},(t,s)=>{const r=Math.PI*2*s/12-Math.PI/2;return{hour:s,x:Math.cos(r)*G,y:Math.sin(r)*G}}),[]),$=i.useMemo(()=>Array.from({length:12},(t,s)=>{const r=Math.PI*2*s/12-Math.PI/2;return{x1:Math.cos(r)*H,y1:Math.sin(r)*H,x2:Math.cos(r)*O,y2:Math.sin(r)*O}}),[]),w=P[l],Y=i.useMemo(()=>a*30,[a]),I=de(Y),S=ae(I),A=ne(S,{stiffness:140,damping:18}),Z=E(A,t=>{const s=t*Math.PI/180-Math.PI/2;return Math.cos(s)*W}),z=E(A,t=>{const s=t*Math.PI/180-Math.PI/2;return Math.sin(s)*W});i.useEffect(()=>{S.set(I)},[S,I]);const C=i.useCallback(()=>{const t=re(),s=Math.floor(Math.random()*12);let r=Math.floor(Math.random()*12);for(;r===s;)r=Math.floor(Math.random()*12);h(t),d(s),g(r),m(0),K(()=>{const f=me(s,r,t);return Number.isFinite(f)?f:null}),M([]),T(!1)},[]);i.useEffect(()=>{C()},[C]);const k=t=>{if(c)return;const s=a,r=_(a+t),f=o+1;d(r),m(f),M([...x,{from:s,to:r,delta:t}]),r===l&&(T(!0),D(f))},X=()=>{if(c||x.length===0)return;const t=x[x.length-1];M(x.slice(0,-1)),d(t.from),m(Math.max(0,o-1))},q=()=>V(t=>!t),J=c?"Solved":"Playing",Q=y===null?"--":String(y),ee=B===null?"--":String(B);return e.jsx("div",{className:"min-h-screen bg-slate-950 text-slate-100 [background:radial-gradient(1200px_600px_at_10%_5%,rgba(56,76,140,0.35),transparent_60%),radial-gradient(900px_520px_at_90%_0%,rgba(51,65,105,0.4),transparent_55%),linear-gradient(160deg,#0b0f1c,#151a2f)]",children:e.jsxs("div",{className:"mx-auto grid max-w-5xl gap-6 px-6 py-10",children:[e.jsx(u.section,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(R,{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("h1",{className:"font-display text-xl",children:"Clock Rotation Game. Target in Fewest Moves"}),e.jsxs("p",{className:"text-sm text-slate-300",children:["Start at a ",e.jsx("span",{className:"font-semibold text-slate-100",children:"random hour"}),". A hidden target hour is chosen. Each round you get a ",e.jsx("span",{className:"font-semibold text-slate-100",children:"random move set"})," (two step sizes with +/- allowed). Try to land on the target using as few moves as possible."]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(j,{label:"Current hour",value:N(a)}),e.jsx(j,{label:"Target",value:v?N(l):"?"}),e.jsx(j,{label:"Moves",value:o}),e.jsx(j,{label:"Par",value:Q}),e.jsx(j,{label:"Best",value:ee}),e.jsx(j,{label:"Status",value:J})]})]})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.2fr_1fr]",children:[e.jsx(u.section,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.6,delay:.05},children:e.jsxs(R,{children:[e.jsxs("svg",{viewBox:xe,className:"w-full rounded-2xl border border-slate-800/80 bg-slate-950/80",children:[e.jsx("circle",{className:"stroke-slate-600/80",fill:"none",strokeWidth:"3",r:b}),$.map((t,s)=>e.jsx("line",{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,className:"stroke-slate-700",strokeWidth:"1.5",strokeLinecap:"round"},`tick-${s}`)),c&&e.jsxs(e.Fragment,{children:[e.jsx(u.circle,{r:b+4,className:"fill-transparent stroke-emerald-200",strokeWidth:"4",strokeOpacity:.9,initial:{opacity:.9},animate:{opacity:1},transition:{duration:.3}}),e.jsx(u.circle,{r:b+6,className:"fill-transparent stroke-emerald-200",strokeWidth:"3",strokeOpacity:.8,initial:{opacity:.8},animate:{r:[b+6,b+18],opacity:[.8,0]},transition:{duration:1.2,ease:"easeOut",repeat:1/0}}),e.jsx(u.text,{x:0,y:28,textAnchor:"middle",dominantBaseline:"middle",className:"text-[10px] font-semibold uppercase tracking-[0.4em] text-emerald-100",fill:"currentColor",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.35},children:"Target Hit"})]}),w&&e.jsx(u.circle,{r:"10",className:"fill-emerald-300",animate:{cx:w.x,cy:w.y,opacity:v?.35:0,scale:v?1:.8},transition:{type:"spring",stiffness:160,damping:16}}),P.map(t=>{const s=v&&t.hour===l;return e.jsx("text",{x:t.x,y:t.y,className:`text-[16px] font-semibold ${s?"text-emerald-200":"text-slate-100"}`,fill:"currentColor",textAnchor:"middle",dominantBaseline:"middle",children:N(t.hour)},`hour-${t.hour}`)}),e.jsxs("g",{children:[e.jsx(u.line,{x1:0,y1:0,x2:Z,y2:z,className:c?"stroke-emerald-200":"stroke-sky-200",strokeWidth:"6",strokeLinecap:"round"}),e.jsx("circle",{r:"6",className:c?"fill-slate-900 stroke-emerald-200":"fill-slate-900 stroke-sky-200",strokeWidth:"3"})]})]}),e.jsxs("p",{className:"mt-4 text-sm text-slate-300",children:["Tip: Your allowed moves generate the group Z",e.jsx("sub",{children:"12"}),". The ",e.jsx("span",{className:"font-semibold",children:"Par"}),"score is the minimum number of moves needed from the start to the target given this round's move set. Try to match par, then beat it if you can (you can't)."]})]})}),e.jsx(u.section,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:e.jsxs(R,{className:"grid gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 min-h-[52px]",children:[e.jsx("p",{className:"text-sm text-slate-300",children:"Choose a rotation amount and direction, then apply it."}),e.jsxs(L,{children:["Mode: ",v?"Reveal Target":"Hidden Target"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 min-h-[52px]",children:[e.jsx("p",{className:"text-sm text-slate-300",children:"Allowed moves this round"}),e.jsxs(L,{children:["+/-",n[0],", +/-",n[1]]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(p,{onClick:()=>k(+n[0]),disabled:c,children:["+",n[0]]}),e.jsxs(p,{variant:"secondary",onClick:()=>k(-n[0]),disabled:c,children:["-",n[0]]}),e.jsxs(p,{onClick:()=>k(+n[1]),disabled:c,children:["+",n[1]]}),e.jsxs(p,{variant:"secondary",onClick:()=>k(-n[1]),disabled:c,children:["-",n[1]]}),e.jsx(p,{variant:"secondary",onClick:X,disabled:c||x.length===0,children:"Undo"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(p,{onClick:C,children:"New Round"}),e.jsx(p,{variant:"secondary",onClick:q,children:"Toggle Target Reveal"}),e.jsx(p,{variant:"danger",onClick:U,children:"Reset Best"})]}),e.jsx("div",{className:"max-h-52 overflow-auto rounded-xl border border-slate-800/80 bg-slate-950/80",children:e.jsx("ul",{className:"divide-y divide-slate-800/80 text-sm text-slate-200",children:x.length===0?e.jsx("li",{className:"px-3 py-2 text-slate-400",children:"No moves yet."}):x.slice().reverse().map((t,s)=>{const r=N(t.from),f=N(t.to),te=t.delta>=0?"+":"";return e.jsxs("li",{className:"flex items-center justify-between gap-3 px-3 py-2",children:[e.jsxs("span",{children:["#",x.length-s,": ",te,t.delta]}),e.jsxs("span",{className:"text-slate-400",children:[r," -> ",f]})]},`move-${x.length-s}`)})})}),e.jsxs("div",{className:"text-xs text-slate-400",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-200",children:"Scoring:"})," fewer moves is better. Best score is saved in your browser (localStorage)."]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"font-semibold text-slate-200",children:"Group lens:"})," rotations compose by addition mod 12. Identity is +0. Inverse of +k is -k."]})]})]})})]})]})})},F=document.getElementById("root");if(!F)throw new Error("Root element not found");oe.createRoot(F).render(e.jsx(ce.StrictMode,{children:e.jsx(ue,{})}));
